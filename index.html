<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© - Ù…ÙƒØªØ¨ Ø§Ù„Ø£Ø®ÙˆÙŠÙ†</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; text-align: center; background-color: #f8f9fa; margin: 0; padding: 0; }
        header { background: #1a73e8; color: white; padding: 40px 20px 60px 20px; border-radius: 0 0 30px 30px; }
        .main-container { max-width: 500px; margin: -30px auto 30px auto; padding: 0 15px; }
        .search-card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-top: 5px solid #ffa000; }
        .input-group { display: flex; gap: 10px; margin-top: 15px; }
        input { flex: 1; padding: 14px; border: 2px solid #eee; border-radius: 12px; font-size: 16px; outline: none; }
        .btn-search { padding: 12px 25px; background: #1a73e8; color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; }
        
        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        #result-display { margin-top: 25px; display: none; text-align: right; }
        
        /* ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²) */
        .status-highlight { background: #fff8e1; border: 2px dashed #ffa000; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: center; }
        .status-label { display: block; font-weight: bold; color: #ff6f00; margin-bottom: 5px; font-size: 1.1em; }
        .status-text { font-size: 1.3em; font-weight: bold; color: #333; }

        /* Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .details-table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 10px; overflow: hidden; }
        .detail-row { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #f1f1f1; }
        .label { font-weight: bold; color: #1a73e8; font-size: 0.9em; }
        .val { color: #444; }

        .error-box { background: #ffebee; color: #c62828; padding: 15px; border-radius: 10px; margin-top: 10px; }
    </style>
</head>
<body>

<header>
    <h1>Ù…ÙƒØªØ¨ Ø§Ù„Ø£Ø®ÙˆÙŠÙ† Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠ</h1>
    <p>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙ„ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø¬Ù‡Ø§Ø²Ùƒ</p>
</header>

<div class="main-container">
    <div class="search-card">
        <h3>ğŸ” Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©</h3>
        <div class="input-group">
            <input type="text" id="orderID" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙ„ (Ù…Ø«Ø§Ù„: 122)">
            <button class="btn-search" onclick="startTracking()">ØªØªØ¨Ø¹</button>
        </div>
        
        <div id="result-display"></div>
    </div>
</div>

<script>
async function startTracking() {
    const id = document.getElementById('orderID').value.trim();
    const display = document.getElementById('result-display');
    if(!id) return;

    display.style.display = "block";
    display.innerHTML = "<p style='text-align:center'>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª...</p>";

    try {
        const url = `https://docs.google.com/spreadsheets/d/e/2PACX-1vQkQ-3k94qAWqRRJ0ZKE6jID23TMJRyic8LumQ9-ywVlvET2JcWlP_OJEh2DHlLJaK7q089DHj8ZU5T/pub?output=csv&t=${new Date().getTime()}`;
        const res = await fetch(url);
        const data = await res.text();
        
        const lines = data.split('\n').map(line => line.split(','));
        const headers = lines[0];
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙ„ (Ø¨ÙƒÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¯Ù‚Ø©)
        const row = lines.find(r => r.some(cell => cell.trim() === id));

        if(row) {
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ù†ÙØªØ±Ø¶ Ø£Ù†Ù‡Ø§ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£Ø®ÙŠØ± Ø£Ùˆ Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…Ù‡Ø§)
            let notesIndex = headers.findIndex(h => h.includes("Ù…Ù„Ø§Ø­Ø¸Ø§Øª") || h.includes("Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"));
            let notes = notesIndex !== -1 ? row[notesIndex] : "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹";

            let html = `
                <div class="status-highlight">
                    <span class="status-label">ğŸ“ Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¢Ù†:</span>
                    <span class="status-text">${notes}</span>
                </div>
                <div class="details-table">
            `;

            row.forEach((value, i) => {
                // Ù†Ø¹Ø±Ø¶ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„Ø£Ù†Ù†Ø§ Ø¹Ø±Ø¶Ù†Ø§Ù‡Ø§ ÙÙˆÙ‚ Ø¨ØªÙ…ÙŠØ²
                if(i !== notesIndex && value.trim() !== "") {
                    html += `
                        <div class="detail-row">
                            <span class="val">${value.trim()}</span>
                            <span class="label">${headers[i] ? headers[i].trim() : 'Ù…Ø¹Ù„ÙˆÙ…Ø©'}</span>
                        </div>
                    `;
                }
            });

            html += `</div>`;
            display.innerHTML = html;
        } else {
            display.innerHTML = `<div class="error-box">âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙ„ (${id}). ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒØªÙˆØ¨ ÙÙŠ Ø§Ù„ÙˆØ±Ù‚Ø©.</div>`;
        }
    } catch(e) {
        display.innerHTML = `<div class="error-box">âš ï¸ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ­Ø§ÙˆÙ„ Ø«Ø§Ù†ÙŠØ©.</div>`;
    }
}
</script>

</body>
</html>
